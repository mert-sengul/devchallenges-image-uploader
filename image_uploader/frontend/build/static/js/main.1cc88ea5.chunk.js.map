{"version":3,"sources":["fileForm.js","apiClient.js","dragAndDropComponent.js","progressBar.js","sharedComponents.js","LinkArea.js","index.js"],"names":["FileForm","React","forwardRef","props","ref","action","method","encType","hidden","name","type","id","fileInputId","accept","onChange","csrfCookieName","csrfHeaderName","apiUrl","form","a","axios","post","FormData","xsrfCookieName","xsrfHeaderName","DragAndDropBody","preventDefaults","e","stopPropagation","preventDefault","className","onDrop","file_list","dataTransfer","files","submitFiles","handleDrop","onDragEnter","onDragOver","Vector","src","DragAndDropText","text","Submitter","child","childProps","htmlFor","UploadComponent","fileInput","createRef","bind","onInputChange","this","current","event","Event","bubbles","dispatchEvent","current_form","parentElement","onSubmit","uploadImage","then","resp","onUploadConfirmed","data","file","children","map","index","isSubmitter","isLabel","Component","alt","ProgressBar","initialStyle","transition","right","left","progressStyle","state","fillerStyles","progress","setState","timeoutID","setTimeout","intervalID","setInterval","clearInterval","clearTimeout","style","LargeRectangle","Hero","textClass","Info","CheckMark","xmlns","width","height","viewBox","d","Image","imageURL","OrText","ChooseButton","CopyButton","value","onClick","DummyInput","readOnly","onDoubleClick","Footer","LinkArea","textValue","copyToClipboard","selectionEnd","select","navigator","clipboard","writeText","link","InitialSection","ProgressSection","FinalSection","Page","submitted","uploaded","console","log","currentSection","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1cc88ea5.chunk.js","sourcesContent":["import React from \"react\";\n\nexport const FileForm = React.forwardRef((props, ref) => {\n    return (\n        <form action=\"/api/images/\" method=\"POST\" encType=\"multipart/form-data\">\n            <input\n                ref={ref}\n                hidden\n                name=\"file\"\n                type=\"file\"\n                id={props.fileInputId}\n                accept=\"image/*\"\n                onChange={props.onChange}\n            />\n        </form>\n    );\n});\n","import axios from 'axios';\nconst csrfCookieName = \"csrftoken\";\nconst csrfHeaderName = \"X-CSRFToken\";\nconst apiUrl = \"/api/images/\";\n\nexport default async function uploadImage(form) {\n    return axios.post(\n        apiUrl, new FormData(form), \n        {\n            xsrfCookieName: csrfCookieName,\n            xsrfHeaderName: csrfHeaderName,\n        }\n    )\n}\n","import React from \"react\";\nimport { FileForm } from \"./fileForm.js\";\nimport uploadImage from \"./apiClient.js\";\n\nexport function DragAndDropBody(props) {\n    const preventDefaults = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n    };\n    const handleDrop = (e) => {\n        preventDefaults(e);\n        const file_list = e.dataTransfer.files;\n        props.submitFiles(file_list);\n    };\n    return (\n        <div\n            className=\"rectangle dropzone-rectangle\"\n            onDrop={(e) => handleDrop(e)}\n            onDragEnter={(e) => preventDefaults(e)}\n            onDragOver={(e) => preventDefaults(e)}\n        >\n            <Vector src=\"static/frontend/mountains.svg\" />\n            <DragAndDropText text=\"Drag & Drop your image here\" />\n        </div>\n    );\n}\n\nfunction Submitter(props) {\n    // wrapper for components with `isSubmitter` or `isLabel` props\n    const child = props.child;\n    const childProps = { ...child.props, submitFiles: props?.submitFiles, htmlFor: props?.htmlFor };\n    return new child.type((props = childProps));\n}\n\nexport class UploadComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.fileInputId = \"file_input_id\";\n        this.fileInput = React.createRef();\n        this.submitFiles = this.submitFiles.bind(this);\n        this.onInputChange = this.onInputChange.bind(this);\n    }\n\n    submitFiles(file_list) {\n        this.fileInput.current.files = file_list;\n        const event = new Event(\"change\", { bubbles: true });\n        this.fileInput.current.dispatchEvent(event);\n    }\n\n    onInputChange(e) {\n        const current_form = this.fileInput.current.parentElement;\n        this.props.onSubmit();\n        uploadImage(current_form).then((resp) => {\n            this.props.onUploadConfirmed(resp.data.file);\n        });\n    }\n\n    render() {\n        return (\n            <>\n                <FileForm\n                    onChange={this.onInputChange}\n                    fileInputId={this.fileInputId}\n                    ref={this.fileInput}\n                />\n                {this.props.children.map((child, index) => {\n                    if (child.props?.isSubmitter) {\n                        return (\n                            <Submitter key={index} child={child} submitFiles={this.submitFiles} />\n                        );\n                    }\n                    if (child.props?.isLabel) {\n                        return <Submitter key={index} child={child} htmlFor={this.fileInputId} />;\n                    }\n                    return <Submitter key={index} child={child} />;\n                })}\n            </>\n        );\n    }\n}\n\nfunction Vector(props) {\n    return (\n        <div className=\"vector\">\n            <img src={props.src} alt={props.alt} />\n        </div>\n    );\n}\n\nfunction DragAndDropText(props) {\n    return (\n        <div className=\"dropzone-text\">\n            <h2>{props.text}</h2>\n        </div>\n    );\n}\n","import React from \"react\";\n\nexport default class ProgressBar extends React.Component {\n    constructor(props) {\n        super(props);\n        this.initialStyle = {\n            transition: \"unset\",\n            right: \"100%\",\n            left: \"0%\",\n        };\n        this.progressStyle = {\n            transition: \"right 1s ease-in-out 0s, left 1s ease-in-out 0.3s\",\n            right: \"0%\",\n            left: \"100%\",\n        };\n        this.state = {\n            fillerStyles: { ...this.initialStyle },\n        };\n        this.progress = this.progress.bind(this);\n    }\n\n    progress() {\n        this.setState({ fillerStyles: { ...this.initialStyle } });\n        this.timeoutID = setTimeout(() => {\n            this.setState({ fillerStyles: { ...this.progressStyle } });\n        }, 50);\n    }\n    componentDidMount() {\n        this.progress();\n        this.intervalID = setInterval(this.progress, 1100);\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.intervalID);\n        clearTimeout(this.timeoutID);\n    }\n\n    render() {\n        return (\n            <div className=\"progress-bar\">\n                <div className=\"progress-line\" style={this.state.fillerStyles}></div>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\n\nexport function LargeRectangle(props) {\n    return <div className=\"rectangle large-rectangle\">{props.children}</div>;\n}\n\nexport function Hero(props) {\n    return (\n        <div className=\"upload\">\n            <h1 className={props.textClass}>{props.text}</h1>\n        </div>\n    );\n}\n\nexport function Info(props) {\n    return (\n        <div className=\"info-section\">\n            <h3>{props.text}</h3>\n        </div>\n    );\n}\n\nexport function CheckMark(props) {\n    return (\n        <svg\n            id=\"checkmark\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"2em\"\n            height=\"2em\"\n            viewBox=\"0 0 24 24\"\n        >\n            <path d=\"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-1 17l-5-5.299 1.399-1.43 3.574 3.736 6.572-7.007 1.455 1.403-8 8.597z\" />\n        </svg>\n    );\n}\n\nexport function Image(props) {\n    return (\n        <img className=\"rectangle image-rectangle\" src={props.imageURL} alt=\"Uploaded content\" />\n    );\n}\n\nexport function OrText(props) {\n    return (\n        <div className=\"or-text\">\n            <h2>{props.text}</h2>\n        </div>\n    );\n}\n\nexport function ChooseButton(props) {\n    return (\n        <label type=\"button\" className=\"button choose-button\" id=\"get_file\" htmlFor={props.htmlFor}>\n            {\"Choose a file\"}\n        </label>\n    );\n}\n\nexport function CopyButton(props) {\n    return (\n        <input\n            type=\"button\"\n            className=\"button copy-button\"\n            value=\"Copy Link\"\n            onClick={(e) => {\n                props.onClick(e);\n            }}\n        />\n    );\n}\n\nexport const DummyInput = React.forwardRef((props, ref) => (\n    <input\n        type=\"text\"\n        readOnly={true}\n        value={props.value}\n        ref={ref}\n        onDoubleClick={props.onDoubleClick}\n    />\n));\n\nexport function Footer(props) {\n    return (\n        <footer>\n            <p>\n                created by <strong>mert-sengul</strong> - devChallenges.io\n            </p>\n        </footer>\n    );\n}\n","import React from \"react\";\nimport { CopyButton, DummyInput } from \"./sharedComponents.js\";\n\nexport class LinkArea extends React.Component {\n    constructor(props) {\n        super(props);\n        this.textValue = React.createRef();\n        this.copyToClipboard = this.copyToClipboard.bind(this);\n    }\n\n    componentDidMount() {\n        // Scroll back to the start of the text\n        this.textValue.current.selectionEnd = 0;\n    }\n\n    copyToClipboard() {\n        this.textValue.current.select(); // focus to text to inform user that the content copied\n        navigator.clipboard.writeText(this.textValue.current.value);\n    }\n\n    render() {\n        return (\n            <div className=\"rectangle link-area\">\n                <DummyInput\n                    value={this.props.link}\n                    ref={this.textValue}\n                    onDoubleClick={(e) => this.copyToClipboard()}\n                />\n                <CopyButton\n                    onClick={(e) => {\n                        this.copyToClipboard();\n                        // navigator.clipboard.writeText(this.props.link);\n                    }}\n                />\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { UploadComponent, DragAndDropBody } from \"./dragAndDropComponent.js\";\nimport ProgressBar from \"./progressBar.js\";\nimport { LinkArea } from \"./LinkArea.js\";\nimport {\n    LargeRectangle,\n    Hero,\n    Info,\n    OrText,\n    ChooseButton,\n    CheckMark,\n    Image,\n    Footer,\n} from \"./sharedComponents\";\n\nimport \"./index.css\";\n\n\nfunction InitialSection(props) {\n    return (\n        <>\n            <LargeRectangle>\n                <Hero text=\"Upload your image\" />\n                <Info text=\"File should be Jpeg, Png,...\" />\n                <UploadComponent\n                    onSubmit={props.onSubmit}\n                    onUploadConfirmed={props.onUploadConfirmed}\n                >\n                    <DragAndDropBody isSubmitter />\n                    <OrText text=\"Or\" />\n                    <ChooseButton isLabel />\n                </UploadComponent>\n            </LargeRectangle>\n        </>\n    );\n}\n\nfunction ProgressSection(props) {\n    return (\n        <LargeRectangle>\n            <Hero textClass={\"align-left\"} text={\"Uploading...\"} />\n            <ProgressBar />\n        </LargeRectangle>\n    );\n}\n\nfunction FinalSection(props) {\n    return (\n        <LargeRectangle>\n            <CheckMark />\n            <Hero text={\"Uploaded Successfully!\"} />\n            <Image imageURL={props.link} />\n            <LinkArea\n                link={props.link}\n            />\n        </LargeRectangle>\n    );\n}\n\nclass Page extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            submitted: false,\n            uploaded: false,\n            link: null,\n        };\n        this.onSubmit = this.onSubmit.bind(this);\n        this.onUploadConfirmed = this.onUploadConfirmed.bind(this);\n    }\n\n    onSubmit(e) {\n        this.setState({ submitted: true });\n    }\n\n    onUploadConfirmed(link) {\n        console.log(link);\n        this.setState({ uploaded: true, link: link });\n    }\n\n    render() {\n        const currentSection = !this.state.submitted ? (\n            <InitialSection onSubmit={this.onSubmit} onUploadConfirmed={this.onUploadConfirmed} />\n        ) : !this.state.uploaded ? (\n            <ProgressSection />\n        ) : (\n            <FinalSection link={this.state.link} />\n        );\n\n        return (\n            <>\n                {currentSection}\n                <Footer />\n            </>\n        );\n    }\n}\n\nReactDOM.render(<Page />, document.getElementById(\"root\"));\n"],"sourceRoot":""}